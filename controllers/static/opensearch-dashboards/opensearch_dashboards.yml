---
# Copyright OpenSearch Contributors
# SPDX-License-Identifier: Apache-2.0

# Description:
# Default configuration for OpenSearch Dashboards

opensearch.hosts: ["https://opensearch:9200"]

server.host: "0.0.0.0"
server.ssl.enabled: true
server.ssl.certificate: /usr/share/opensearch-dashboards/config/certs/tls.crt
server.ssl.key: /usr/share/opensearch-dashboards/config/certs/tls.key

# FIXME: Change to full, when cert generator is including alternative names.
# Current error with enabled verificationMode Full:
# {message":"[ConnectionError]: Hostname/IP does not match certificate's altnames: Host: opensearch.default.svc.cluster.local. is not cert's CN: client"}
opensearch.ssl.verificationMode: certificate
opensearch.ssl.certificateAuthorities:
  ["/usr/share/opensearch-dashboards/config/certs/ca.crt"]

opensearch_security.multitenancy.enabled: true
opensearch_security.multitenancy.tenants.enable_global: true
opensearch_security.multitenancy.tenants.enable_private: true
opensearch_security.multitenancy.tenants.preferred: ["Global", "Private"]
opensearch_security.multitenancy.enable_filter: false

# additional settings that were not listened in configure-kibana,
# but are required.
opensearch.requestHeadersWhitelist: ["securitytenant", "Authorization"]
opensearch_security.readonly_mode.roles: ["kibana_read_only"]
opensearch_security.cookie.secure: false
map.includeElasticMapsService: false

# keycloak auth
opensearch_security.auth.type: "openid"
opensearch_security.openid.client_id: opensearch-dashboards
opensearch_security.openid.client_secret: "{{ KC_CLIENT_SECRET }}"
opensearch_security.openid.connect_url: https://keycloak.{{ FQDN }}/realms/SF/.well-known/openid-configuration
opensearch_security.openid.base_redirect_url: https://opensearch-dashboards.{{ FQDN }}
opensearch_security.openid.root_ca: "/usr/share/opensearch-dashboards/config/certs/ca.crt"
